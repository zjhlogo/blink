#include "TileAtlas.h"

bool TileAtlas::initialize()
{
    static const Piece s_pieceList[32] =
    {
        { "dirt_00", { 16, 16 }, { { 0.000f, 0.875f }, { 0.125f, 0.875f }, { 0.000f, 1.000f }, { 0.125f, 1.000f } } },
        { "dirt_01", { 16, 16 }, { { 0.000f, 0.734f }, { 0.125f, 0.734f }, { 0.000f, 0.859f }, { 0.125f, 0.859f } } },
        { "dirt_02", { 16, 16 }, { { 0.000f, 0.594f }, { 0.125f, 0.594f }, { 0.000f, 0.719f }, { 0.125f, 0.719f } } },
        { "dirt_03", { 16, 16 }, { { 0.000f, 0.453f }, { 0.125f, 0.453f }, { 0.000f, 0.578f }, { 0.125f, 0.578f } } },
        { "dirt_04", { 16, 16 }, { { 0.000f, 0.313f }, { 0.125f, 0.313f }, { 0.000f, 0.438f }, { 0.125f, 0.438f } } },
        { "dirt_05", { 16, 16 }, { { 0.000f, 0.172f }, { 0.125f, 0.172f }, { 0.000f, 0.297f }, { 0.125f, 0.297f } } },
        { "dirt_06", { 16, 16 }, { { 0.000f, 0.031f }, { 0.125f, 0.031f }, { 0.000f, 0.156f }, { 0.125f, 0.156f } } },
        { "dirt_07", { 16, 16 }, { { 0.141f, 0.875f }, { 0.266f, 0.875f }, { 0.141f, 1.000f }, { 0.266f, 1.000f } } },
        { "dirt_08", { 16, 16 }, { { 0.281f, 0.875f }, { 0.406f, 0.875f }, { 0.281f, 1.000f }, { 0.406f, 1.000f } } },
        { "dirt_09", { 16, 16 }, { { 0.422f, 0.875f }, { 0.547f, 0.875f }, { 0.422f, 1.000f }, { 0.547f, 1.000f } } },
        { "dirt_10", { 16, 16 }, { { 0.563f, 0.875f }, { 0.688f, 0.875f }, { 0.563f, 1.000f }, { 0.688f, 1.000f } } },
        { "dirt_11", { 16, 16 }, { { 0.703f, 0.875f }, { 0.828f, 0.875f }, { 0.703f, 1.000f }, { 0.828f, 1.000f } } },
        { "dirt_12", { 16, 16 }, { { 0.844f, 0.875f }, { 0.969f, 0.875f }, { 0.844f, 1.000f }, { 0.969f, 1.000f } } },
        { "dirt_13", { 16, 16 }, { { 0.141f, 0.734f }, { 0.266f, 0.734f }, { 0.141f, 0.859f }, { 0.266f, 0.859f } } },
        { "dirt_14", { 16, 16 }, { { 0.141f, 0.594f }, { 0.266f, 0.594f }, { 0.141f, 0.719f }, { 0.266f, 0.719f } } },
        { "dirt_15", { 16, 16 }, { { 0.141f, 0.453f }, { 0.266f, 0.453f }, { 0.141f, 0.578f }, { 0.266f, 0.578f } } },
        { "rock_00", { 16, 16 }, { { 0.141f, 0.313f }, { 0.266f, 0.313f }, { 0.141f, 0.438f }, { 0.266f, 0.438f } } },
        { "rock_01", { 16, 16 }, { { 0.141f, 0.172f }, { 0.266f, 0.172f }, { 0.141f, 0.297f }, { 0.266f, 0.297f } } },
        { "rock_02", { 16, 16 }, { { 0.141f, 0.031f }, { 0.266f, 0.031f }, { 0.141f, 0.156f }, { 0.266f, 0.156f } } },
        { "rock_03", { 16, 16 }, { { 0.281f, 0.734f }, { 0.406f, 0.734f }, { 0.281f, 0.859f }, { 0.406f, 0.859f } } },
        { "rock_04", { 16, 16 }, { { 0.422f, 0.734f }, { 0.547f, 0.734f }, { 0.422f, 0.859f }, { 0.547f, 0.859f } } },
        { "rock_05", { 16, 16 }, { { 0.563f, 0.734f }, { 0.688f, 0.734f }, { 0.563f, 0.859f }, { 0.688f, 0.859f } } },
        { "rock_06", { 16, 16 }, { { 0.703f, 0.734f }, { 0.828f, 0.734f }, { 0.703f, 0.859f }, { 0.828f, 0.859f } } },
        { "rock_07", { 16, 16 }, { { 0.844f, 0.734f }, { 0.969f, 0.734f }, { 0.844f, 0.859f }, { 0.969f, 0.859f } } },
        { "rock_08", { 16, 16 }, { { 0.281f, 0.594f }, { 0.406f, 0.594f }, { 0.281f, 0.719f }, { 0.406f, 0.719f } } },
        { "rock_09", { 16, 16 }, { { 0.281f, 0.453f }, { 0.406f, 0.453f }, { 0.281f, 0.578f }, { 0.406f, 0.578f } } },
        { "rock_10", { 16, 16 }, { { 0.281f, 0.313f }, { 0.406f, 0.313f }, { 0.281f, 0.438f }, { 0.406f, 0.438f } } },
        { "rock_11", { 16, 16 }, { { 0.281f, 0.172f }, { 0.406f, 0.172f }, { 0.281f, 0.297f }, { 0.406f, 0.297f } } },
        { "rock_12", { 16, 16 }, { { 0.281f, 0.031f }, { 0.406f, 0.031f }, { 0.281f, 0.156f }, { 0.406f, 0.156f } } },
        { "rock_13", { 16, 16 }, { { 0.422f, 0.594f }, { 0.547f, 0.594f }, { 0.422f, 0.719f }, { 0.547f, 0.719f } } },
        { "rock_14", { 16, 16 }, { { 0.563f, 0.594f }, { 0.688f, 0.594f }, { 0.563f, 0.719f }, { 0.688f, 0.719f } } },
        { "rock_15", { 16, 16 }, { { 0.703f, 0.594f }, { 0.828f, 0.594f }, { 0.703f, 0.719f }, { 0.828f, 0.719f } } },

    };

    m_pieceList = s_pieceList;
    m_numPieces = 32;

    // create pieces
    for (int i = 0; i < m_numPieces; ++i)
    {
        m_pieceMap[s_pieceList[i].id] = &s_pieceList[i];
    }
    // create texture
    m_texture = blink::Texture2D::fromFile("resource/TileAtlas.png");
    m_texture->setMinFilter(blink::Texture::SampleFilter::Nearest);
    m_texture->setMagFilter(blink::Texture::SampleFilter::Nearest);

    return true;
}
